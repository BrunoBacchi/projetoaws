#!/bin/bash

# Configura칞칫es
SITE_URL="http://54.224.81.127/"
LOG_FILE="/var/log/monitoramento.log"
DISCORD_WEBHOOK="https://discord.com/api/webhooks/1339253507877765190/fFPvPnu7C0LhXZ2yqaMz6OHepRvnL7pA4LzFThAGOTAJURnxaFttRAIMKZ1ZPX2igP90"

# Fun칞칚o para registrar logs
log() {
    local message="$1"
    echo "$(date '+%Y-%m-%d %H:%M:%S') - $message" >> "$LOG_FILE"
}

# Fun칞칚o para enviar notifica칞칚o no Discord
notificar_discord() {
    local message="$1"
    curl -H "Content-Type: application/json" -X POST -d "{\"content\": \"$message\"}" "$DISCORD_WEBHOOK"
}

# Verifica se o site est치 dispon칤vel
response=$(curl -o /dev/null -s -w "%{http_code}" "$SITE_URL")

if [[ "$response" -eq 200 ]]; then
    log "Site $SITE_URL est치 online. C칩digo de resposta: $response"
else
    log "Site $SITE_URL est치 offline. C칩digo de resposta: $response"
    notificar_discord "游뚿 ALERTA: O site $SITE_URL est치 offline! C칩digo de resposta: $response"
fi

